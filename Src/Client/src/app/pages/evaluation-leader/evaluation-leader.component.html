<h2>Leader Evaluation</h2>

<div>
  <dx-data-grid id="gridContainer" [dataSource]="dataSource" [remoteOperations]="false" [allowColumnReordering]="true"
    [rowAlternationEnabled]="true" (onInitialized)="onInitGrid($event)" (onToolbarPreparing)="onToolbarPreparing($event)"
    (onCellClick)="onCellClick($event)" [showBorders]="true">
    <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[10, 25, 50, 100]"></dxo-pager>
    <dxo-search-panel [visible]="true" [highlightCaseSensitive]="true"></dxo-search-panel>
    <dxi-column [hidingPriority]="1" dataField="name" dataType="string"></dxi-column>
    <dxi-column [hidingPriority]="3" dataField="projectName" dataType="string"></dxi-column>
    <dxi-column [hidingPriority]="2" dataField="position" dataType="string"></dxi-column>
    <dxi-column [hidingPriority]="1" [caption]="capValue1" dataField="value1.score" cellTemplate="valueCellTemplate1"
      dataType="string" cssClass="bullet"></dxi-column>
    <dxi-column [hidingPriority]="1" [caption]="capValue2" dataField="value2.score" cellTemplate="valueCellTemplate2"
      dataType="string"></dxi-column>
    <dxi-column [hidingPriority]="1" [caption]="capValue3" dataField="value3.score" cellTemplate="valueCellTemplate3"
      dataType="string"></dxi-column>
    <dxi-column [hidingPriority]="1" [caption]="capValue4" dataField="value4.score" cellTemplate="valueCellTemplate4"
      dataType="string"></dxi-column>
    <div *dxTemplate="let item of 'valueCellTemplate1'">
      <div *ngIf="item.data.value1.score === '0' && item.data.value1.needEvaluate">
        <a title="Need to evaluate.">Need to evaluate.</a>
      </div>
      <div *ngIf="item.data.value1 !== null && item.data.value1.score !== '0'">
        {{ item.data.value1.score }}
      </div>
    </div>
    <div *dxTemplate="let item of 'valueCellTemplate2'">
      <div *ngIf="item.data.value2.score === '0' && item.data.value2.needEvaluate">
        <a title="Need to evaluate.">Need to evaluate.</a>
      </div>
      <div *ngIf="item.data.value2 !== null && item.data.value2.score !== '0'">
        {{ item.data.value2.score }}
      </div>
    </div>
    <div *dxTemplate="let item of 'valueCellTemplate3'">
      <div *ngIf="item.data.value3.score === '0' && item.data.value3.needEvaluate">
        <a title="Need to evaluate.">Need to evaluate.</a>
      </div>
      <div *ngIf="item.data.value3 !== null && item.data.value3.score !== '0'">
        {{ item.data.value3.score }}
      </div>
    </div>
    <div *dxTemplate="let item of 'valueCellTemplate4'">
      <div *ngIf="item.data.value4.score === '0' && item.data.value4.needEvaluate">
        <a title="Need to evaluate.">Need to evaluate.</a>
      </div>
      <div *ngIf="item.data.value4 !== null && item.data.value4.score !== '0'">
        {{ item.data.value4.score }}
      </div>
    </div>
    <div *dxTemplate="let cell of 'myToolbarTemplate'">
      <span style="position: relative; top: 7px">Project: </span>
      <div style="float: right; width: auto">
        <dx-select-box style="margin-left: 10px" stylingMode="contained" displayExpr="name" valueExpr="id"
          [dataSource]="projectItems" [showClearButton]="true" (onInitialized)="onInitSelectBox($event)"
          (onSelectionChanged)="onChanged($event)">
        </dx-select-box>
      </div>
    </div>
  </dx-data-grid>
</div>

<app-evaluation-detail
  [quarterId]="quarterEvaluationId"
  [rootComp]="component"
></app-evaluation-detail>
